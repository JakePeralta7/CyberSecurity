#include <windows.h> 
#include <stdio.h> 
#include <tchar.h>
#include <string.h>
#include <wchar.h>


typedef enum { false, true } bool;

HHOOK mouseHook;
HANDLE thread;
static char v1;
DWORD start;

//The mouse callback func.
LRESULT __stdcall MouseHookCallback(int nCode, WPARAM wParam, LPARAM lParam)
{
	if (nCode >= 0)
	{
		if (wParam == WM_MOUSEMOVE) {
			exit(0);
		}
	}
	return CallNextHookEx(mouseHook, nCode, wParam, lParam);
}

//Sets the hook.
void SetHook()
{
	if (!(mouseHook = SetWindowsHookEx(WH_MOUSE_LL, MouseHookCallback, NULL, 0)))
	{
		printf("cannot set hook");
	}
}

//Waits for events of the mouse. if one occur, exit program.
DWORD WINAPI ListenToHook()
{
	SetHook();
	MSG msg;

	while (GetMessage(&msg, NULL, 0, 0))
	{
		TranslateMessage(&msg);
		DispatchMessage(&msg);
	}
}



void main() {
	DWORD dwThreadId, dwThrdParam = 1;
	char str1[20];
	//Checks if the thread handle is set. if it is, stop thread, else start.
	ListenToHook();
	
	
	printf("Program running!");
	scanf_s("%s", str1, sizeof(str1));
}